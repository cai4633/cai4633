---
title: 防抖和节流
date: 2020-07-18 10:56:17
categories: 前端
tags: 精华
---
在前端开发的过程中，我们经常会遇到一些的事件会持续触发，如 resize、scroll、mousemove 等，但有时候我们并不希望事件函数频繁的被执行。这时就需要用到**防抖和节流**

## 防抖（控制次数）

**防抖，就是触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计时。** 常见的实现方法如下：
```
function debounce (fn,  delay) {
  let timer = null
  return function(...args){
    if(timer){
      window.clearTimeout(timer)
    }
    timer = setTimeout(()=>{
      fn.apply(this,args)
    },delay)
  }
}
```

## 节流（控制频率）

**节流，就是事件连续触发时，控制在 n 秒中只执行一次函数，如果在 n 秒内又触发了事件,会忽略触发**。常见的实现方法如下：
```
function throttle(fn, delay) {
  let timer = null
  return function (...arg){
    if(!timer){
      fn.apply(this, arg)
      timer = window.setTimeout(()=>{
        window.clearTimeout(timer)
        timer = null
      })
    }
  }
}
```

## 防抖和节流的区别
有时候我们很容易混淆防抖和节流的触发机制，下面我们用一张图来展示他们的区别。
![防抖和节流的区别](/images/防抖和节流的区别.png)






